{% extends "base.html" %}

{% block title %}Submit Idea - Citizen Developer Posting Board{% endblock %}

{% block content %}
<div class="page-container">
    <h2 class="page-title">Submit a New Idea</h2>
    
    <form id="submit-form" method="POST" action="{{ url_for('main.submit') }}">
        <div class="form-group">
            <label for="title">Title <span style="color: red;">*</span></label>
            <input type="text" id="title" name="title" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="description">Description <span style="color: red;">*</span></label>
            <textarea id="description" name="description" class="form-control" rows="5" required></textarea>
        </div>
        
        <div class="form-group">
            <label>Skills Needed <span style="color: red;">*</span></label>
            <div class="skill-input-group">
                <select id="skill-select" class="form-control">
                    <option value="">Select a skill...</option>
                </select>
                <input type="text" id="skill-input" class="form-control" placeholder="Or type a custom skill">
                <button type="button" id="add-skill-btn" class="btn btn-secondary">Add Skill</button>
            </div>
            <div id="selected-skills" class="selected-skills"></div>
            <div style="margin-top: 5px;">
                <small style="color: #6c757d;">Skills are required for this idea only and will not be saved to your profile.</small>
            </div>
        </div>
        
        <div class="form-group">
            <label for="priority">Priority <span style="color: red;">*</span></label>
            <select id="priority" name="priority" class="form-control" required>
                <option value="">Select priority...</option>
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="size">Size <span style="color: red;">*</span></label>
            <select id="size" name="size" class="form-control" required>
                <option value="">Select size...</option>
                <option value="small">Small</option>
                <option value="medium">Medium</option>
                <option value="large">Large</option>
                <option value="extra_large">Extra Large</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Your Team <span style="color: red;">*</span></label>
            {% if user_team %}
                <!-- User has an assigned team -->
                <input type="text" id="team-input" name="team" class="form-control" value="{{ user_team }}" readonly style="background-color: #e9ecef;">
                <div style="margin-top: 5px;">
                    <small style="color: #6c757d;">Using your assigned team: {{ user_team }}</small>
                </div>
            {% else %}
                <!-- User can select or enter a team -->
                <div class="team-input-group">
                    <select id="team-select" class="form-control">
                        <option value="">Select a team...</option>
                    </select>
                    <input type="text" id="team-input" name="team" class="form-control" placeholder="Or enter a custom team">
                </div>
                <div style="margin-top: 5px;">
                    <small style="color: #6c757d;">Your team will be saved for future submissions. 
                    <a href="#" id="clear-saved-data" style="color: #dc3545;">Clear saved team</a></small>
                </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="needed_by">Needed By (Optional)</label>
            <input type="date" id="needed_by" name="needed_by" class="form-control">
        </div>
        
        <div class="form-group">
            <label for="bounty">Bounty (Optional)</label>
            <input type="text" id="bounty" name="bounty" class="form-control" placeholder="e.g., Company swag, Lunch with leadership, Team shoutout">
        </div>
        
        <!-- Bounty Section -->
        <div class="form-group" style="margin-top: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
            <h4 style="margin-top: 0; margin-bottom: 15px; font-size: 16px;">Monetary Bounty (Optional)</h4>
            
            <div style="margin-bottom: 15px;">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="is_monetary" name="is_monetary" style="width: 18px; height: 18px;">
                    <span>This idea has a monetary bounty</span>
                </label>
            </div>
            
            <div id="expense-section" style="display: none; margin-left: 26px;">
                <div style="margin-bottom: 15px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="is_expensed" name="is_expensed" style="width: 18px; height: 18px;">
                        <span>Will be expensed</span>
                    </label>
                </div>
                
                <div id="amount-section" style="display: none;">
                    <label for="amount">Amount</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 18px;">$</span>
                        <input type="number" id="amount" name="amount" class="form-control" 
                               placeholder="0.00" min="0" step="0.01" style="max-width: 150px;">
                    </div>
                    <div id="approval-notice" style="margin-top: 10px; padding: 10px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; display: none;">
                        <strong>Note:</strong> Amounts over $50 require manager or admin approval.
                    </div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 30px;">
            <button type="submit" class="btn btn-primary">Submit Idea</button>
            <a href="{{ url_for('main.home') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/submit.js') }}"></script>
{% endblock %}